# 多体仿真测试题 - 铰链链式系统 (Hinge Chain)

使用MuJoCo物理引擎实现的Hinge Chain仿真系统。

## 项目描述

本项目实现了一个Hinge Chain系统，即若干Capsule形状的刚体通过HingeJoint连接而成：
- 链条顶端固定在世界坐标系原点
- 6个Capsule刚体按顺序通过HingeJoint连接
- 铰链只允许绕特定轴转动（交替使用X轴和Y轴）
- 系统在重力场下自由摆动
- 地面位置较低，链条不会碰到地面

## 文件说明

```
.
├── hinge_chain.xml           # MuJoCo模型文件
├── simulate_hinge_chain.py   # 仿真程序
└── README.md                 # 本文档
```

## 依赖安装

使用pixi（推荐）：
```bash
pixi install
```

或使用pip：
```bash
pip install mujoco numpy
```

## 使用方法

**推荐在pixi环境中运行**

进入pixi shell环境：
```bash
pixi shell
```

运行仿真程序：
```bash
python simulate_hinge_chain.py
```

或者不进入shell，直接运行：
```bash
pixi run python simulate_hinge_chain.py
```

## 交互控制

仿真窗口支持以下操作：
- **鼠标左键拖拽**：旋转视角
- **鼠标滚轮**：缩放
- **鼠标右键拖拽**：平移视角
- **双击**：选择物体
- **Ctrl + 右键**：向前/向后移动
- **Tab**：切换可视化选项（显示联系力、关节等）
- **ESC**：退出程序

注意：MuJoCo的`launch` viewer会自动控制仿真速度以匹配实时播放。

## 模型参数

模型设置：
- **Capsule刚体数量**: 6
- **每个Capsule长度**: 0.5 m
- **Capsule半径**: 0.05 m
- **刚体密度**: 1000 kg/m³
- **铰链交替转动轴**: X轴和Y轴交替
- **重力加速度**: 9.81 m/s²
- **时间步长**: 0.002 s
- **积分器**: RK4（四阶龙格-库塔）
- **关节阻尼**: 0.05

## 输出结果

运行程序后会显示：
- 实时3D可视化窗口
- 控制台输出模型信息（Capsule数量、关节数量、自由度等）

## 技术特点

1. **模型正确性**
   - 使用Capsule形状的刚体（符合题目要求）
   - 顶端固定，链条悬挂
   - HingeJoint约束正确实现
   - 交替使用X和Y轴作为铰链转动轴
   - 链条不会碰到地面

2. **物理仿真**
   - 使用MuJoCo的RK4积分器
   - 正确计算Capsule的质量和惯性张量
   - 在重力场下自然摆动
   - 关节阻尼模拟能量耗散

3. **可视化效果**
   - 实时3D渲染
   - Capsule使用棕色材质
   - 固定点用红色球体标记
   - 地面网格参考
   - 双光源照明

## 物理原理

该系统展示了经典的多体动力学：
- **多体系统约束求解**：HingeJoint限制了相邻刚体间的相对运动
- **耦合振荡**：各个Capsule之间通过铰链相互作用
- **混沌行为**：初始条件的微小变化可能导致显著不同的运动模式
- **能量转换**：重力势能与动能之间的转换

## 扩展建议

可以尝试的扩展：
1. 修改Capsule数量
2. 调整铰链轴方向配置
3. 添加角度限制约束（例如限制在±30度之间）
4. 添加控制器实现特定运动
5. 尝试不同的初始条件
6. 导出动画视频

## 许可证

MIT License
